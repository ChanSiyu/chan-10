/*--------------------------------*- C++ -*----------------------------------*\
  =========                 |
  \\      /  F ield         | OpenFOAM: The Open Source CFD Toolbox
   \\    /   O peration     | Website:  https://openfoam.org
    \\  /    A nd           | Version:  10
     \\/     M anipulation  |
\*---------------------------------------------------------------------------*/

// Global Parameters :this parameters enables usage of relative values instead of absolute:
    // true – sizes relative to the cell size next to the patch for which adding layers is defined
    // false – sizes in absolute values
relativeSizes true;

expansionRatio 1.1;

finalLayerThickness 0.01;

// Per final patch (so not geometry!) the layer information
// 每个patch的边界层信息
layers
{
    body
    {
        nSurfaceLayers 10;
        expansionRatio 1.1;
        finalLayerThickness 0.05;
    }
}

// Minimum thickness of cell layer. If for any reason layer
// cannot be above minThickness do not add layer.
// Relative to undistorted size of cell outside layer.
// See relativeSizes parameter.
// 边界层最小尺寸
minThickness 0.0001;

// If points get not extruded do nGrow layers of connected faces that are
// also not grown. This helps convergence of the layer addition process
// close to features.
// Note: changed(corrected) w.r.t 17x! (didn't do anything in 17x)
// 我TM也不知道这是啥
nGrow 0;

// When not to extrude surface. 0 is flat surface, 90 is when two faces
// are perpendicular
// 不超过该角度的曲面。0代表平面，90代表两面垂直
featureAngle 180;

// Stop layer growth on highly warped cells
maxFaceThicknessRatio 0.5;

// Patch displacement

    // Number of smoothing iterations of surface normals
    nSmoothSurfaceNormals 10;

    // Smooth layer thickness over surface patches
    nSmoothThickness 10;

// Medial axis analysis

    // Angle used to pick up medial axis points
    // Note: changed(corrected) w.r.t 17x! 90 degrees corresponds to 130
    // in 17x.
    minMedialAxisAngle 90;

    // Reduce layer growth where ratio thickness to medial
    // distance is large
    maxThicknessToMedialRatio 0.3;

    // Number of smoothing iterations of interior mesh movement direction
    nSmoothNormals 15;

    // Optional: limit the number of steps walking away from the surface.
    // Default is unlimited.
    nMedialAxisIter 10;

    // Optional: smooth displacement after medial axis determination.
    // default is 0.
    // nSmoothDisplacement 90;

    // (wip)Optional: do not extrude a point if none of the surrounding points is
    // not extruded. Default is false.
    // detectExtrusionIsland true;

// Mesh shrinking

    // Optional: at non-patched sides allow mesh to slip if extrusion
    // direction makes angle larger than slipFeatureAngle. Default is
    // 0.5*featureAngle.
    slipFeatureAngle 30;

    // Maximum number of snapping relaxation iterations. Should stop
    // before upon reaching a correct mesh.
    nRelaxIter 25;

    // Create buffer region for new layer terminations
    nBufferCellsNoExtrude 0;

    // Overall max number of layer addition iterations. The mesher will
    // exit if it reaches this number of iterations; possibly with an
    // illegal mesh.
    nLayerIter 10;

    // Max number of iterations after which relaxed meshQuality controls
    // get used. Up to nRelaxedIter it uses the settings in
    // meshQualityControls,
    // after nRelaxedIter it uses the values in
    // meshQualityControls::relaxed.
    nRelaxedIter 25;

    // Additional reporting: if there are just a few faces where there
    // are mesh errors (after adding the layers) print their face centres.
    // This helps in tracking down problematic mesh areas.
    // additionalReporting true;